# ========================================
# BASE APPLICATION CONFIGURATION
# ========================================
# Common configuration shared across all profiles
# Profile-specific: application-{profile}.properties

# ========================================
# 1. APPLICATION SETTINGS
# ========================================
spring.application.name=demo

# Default profile (used when no profile is explicitly set)
spring.profiles.default=local

# ========================================
# 2. SESSION & COOKIE CONFIGURATION (ALL PROFILES)
# ========================================
# Disable URL-based session tracking for maximum security
server.servlet.session.tracking-modes=COOKIE

# Set SameSite=Strict to mitigate CSRF (fixes ZAP 10054)
server.servlet.session.cookie.same-site=strict

# Add HttpOnly (prevents client-side script access to the cookie)
server.servlet.session.cookie.http-only=true

# Add Secure (ensure cookie is only sent over HTTPS/SSL)
# Default is false for local/dev (HTTP), override to true in production profile
server.servlet.session.cookie.secure=${COOKIE_SECURE:false}

# ========================================
# 3. ERROR HANDLING CONFIGURATION
# ========================================
# Enable RFC 7807 Problem Details for HTTP APIs (Spring Boot 3+)
spring.mvc.problemdetails.enabled=true

# ========================================
# 4. ACTUATOR CONFIGURATION (DEFAULT)
# ========================================
# These can be overridden in profile-specific files
# Security: Use custom base path to obscure actuator endpoints from scanners
management.endpoints.web.base-path=/management
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=when-authorized

# ========================================
# 5. SECURITY FILTER REGISTRATION
# ========================================
# Force Spring Security to run on Error and Forward dispatches so headers are written to 404 pages
spring.security.filter.dispatcher-types=request,async,error,forward,include

