# ========================================
# INTEGRATION TEST PROFILE
# ========================================
# This profile is activated for PostgreSQL Testcontainers integration tests
# Usage: @ActiveProfiles({"test", "integration"})

# ========================================
# 2. JPA/HIBERNATE CONFIGURATION
# ========================================
spring.jpa.hibernate.ddl-auto=validate

spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0

# ========================================
# 3. SQL INITIALIZATION
# ========================================
# Enable SQL initialization to run schema.sql (complements Hibernate)
spring.sql.init.mode=never
spring.jpa.defer-datasource-initialization=false

# ========================================
# 4. SPRING MODULITH CONFIGURATION
# ========================================
spring.modulith.events.jdbc.schema-initialization.enabled=false

# ========================================
# 5. DEBUG LOGGING FOR TROUBLESHOOTING
# ========================================
# Enable debug logging for Flyway to diagnose migration issues
logging.level.org.flywaydb=DEBUG
logging.level.org.flywaydb.core.internal=DEBUG
# Enable Spring Boot auto-configuration debug to see bean creation order
#logging.level.org.springframework.boot.autoconfigure=DEBUG