# ========================================
# DEVELOPMENT PROFILE (SHARED ENVIRONMENT)
# ========================================
# This profile can be used for shared development environments / staging
# Usage: java -jar app.jar --spring.profiles.active=dev

# ========================================
# 1. DATABASE CONFIGURATION
# ========================================
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/spring_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:spring_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:secure_password}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool (HikariCP)
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:15}
spring.datasource.hikari.minimum-idle=${DB_POOL_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ========================================
# 2. JPA/HIBERNATE CONFIGURATION
# ========================================
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.show_sql=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.open-in-view=true

# SQL Initialization
spring.sql.init.mode=always
spring.sql.init.continue-on-error=true

# ========================================
# 3. WEB SERVER CONFIGURATION
# ========================================
server.port=${SPRING_SERVER_PORT:8080}
server.servlet.context-path=/api

# Compression (optional in dev)
server.compression.enabled=${COMPRESSION_ENABLED:false}

# ========================================
# 4. SECURITY CONFIGURATION
# ========================================
# CORS (configurable via env)
cors.allowed.origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000}

# Admin credentials (overrideable)
admin.username=${ADMIN_USERNAME:admin}
admin.password=${ADMIN_PASSWORD:devpassword}

# Cookie secure (inherited from application.properties: false)

# ========================================
# 5. ACTUATOR CONFIGURATION
# ========================================
management.endpoints.web.exposure.include=health,info,metrics,env
management.endpoint.health.show-details=when-authorized
management.endpoint.health.probes.enabled=true
management.info.env.enabled=true
management.info.java.enabled=true
management.info.os.enabled=true

# ========================================
# 6. LOGGING CONFIGURATION
# ========================================
# Moderate logging (INFO/DEBUG mix)
logging.level.root=INFO
logging.level.com.example.demo=DEBUG
logging.level.org.springframework=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.springframework.boot.actuate=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.jdbc.core=DEBUG

# Testcontainers (not applicable in dev)
# logging.level.org.testcontainers=INFO
# logging.level.tc=INFO

# Log pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Log to file (optional)
# logging.file.name=/var/log/demo-app/dev.log
# logging.file.max-size=10MB
# logging.file.max-history=30

# ========================================
# 7. ERROR HANDLING
# ========================================
# Show details on request parameter
server.error.include-stacktrace=on-param
server.error.include-message=on-param
server.error.include-binding-errors=on-param

# ========================================
# 8. TESTCONTAINERS CONFIGURATION
# ========================================
# Not applicable in dev (used in tests only)

